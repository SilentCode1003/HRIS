<script>
  $(document).ready(function () {
    console.log('Initialize');
    document.addEventListener("keyup", function (event) {
      if (event.keyCode === 13) {
        let username = $("#username").val();
        let password = $("#password").val();

        var message = "";

        if (username === "") {
          message += "Username ";
        }
        if (password === "") {
          message += "Password ";
        }

        if (message !== "") {
          warning("Required", `Please fill up ${message}`);
        } else {
          $.ajax({
            type: "POST",
            url: "/login/login",
            data: {
              username: username,
              password: password,
            },
            success: function (result) {
              console.log(result.data[0].accesstype);
              if (result.msg === "success") {
                showSweetAlert("Success", "Log in Successfully", "success", "Let's go!");
                //window.location.reload();
                if (result.data[0].accesstype == 'Employee') {
                  location.replace("/eportalindex");
                }
                else {
                  location.replace("/");
                }

              }
              if (result.msg === "incorrect") {
                showSweetAlert("Incorrect", "Incorrect Credentials. Please try again!", "error", "AWW NO!!");
              }
            },
            error: function (err) {
              errormsg(err);
            },
          });
        }
      }
    });

    $(document).on("click", "#loginBtn", function () {
      let username = $("#username").val();
      let password = $("#password").val();

      var message = "";

      if (username === "") {
        message += "Username ";
      }
      if (password === "") {
        message += "Password ";
      }

      if (message !== "") {
        warning("Required", `Please fill up ${message}`);
      } else {
        $.ajax({
          type: "POST",
          url: "/login/login",
          data: {
            username: username,
            password: password,
          },
          success: function (result) {
            console.log(result.data[0].accesstype);
            if (result.msg === "success") {
              showSweetAlert("Success", "Log in Successfully", "success", "Let's go!");
              //window.location.reload();
              if (result.data[0].accesstype == 'Employee') {
                location.replace("/eportalindex");
              }
              else {
                location.replace("/");
              }

            }
            if (result.msg === "incorrect") {
              showSweetAlert("Incorrect", "Incorrect Credentials. Please try again!", "error", "AWW NO!!");
            }
          },
          error: function (err) {
            errormsg(err);
          },
        });
      }
    });
  });


</script>